<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>VK API with MVC pattern and extended functions</title>


    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/css/bootstrap.min.css" integrity="sha384-rwoIResjU2yc3z8GV/NPeZWAv56rSmLldC3R/AZzGRnGxQQKnKkoFVhFQhNUwEyJ" crossorigin="anonymous">
    <link rel="stylesheet" href="http://pro.qoobeo.ru/qsvgl/css/qoobloader.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>


<section>
    <div class="container">
        <div class="row">
            <div class="col-12">
                <h1>VK API with MVC pattern and extended functions</h1>
                <div id="accordionMain">
                    <div class="card">
                        <div class="card-header" id="heading1">
                            <h5 class="mb-0">
                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse" aria-expanded="false" aria-controls="collapse">
                                    Посмотреть задания
                                </button>
                            </h5>
                        </div>
                        <div id="collapse" class="collapse" aria-labelledby="heading" data-parent="#accordionMain">
                            <div class="card-body">
                                <!-- Start inner accordion -->
                                <div id="accordion">
                                    <div class="card">
                                        <div class="card-header" id="heading1">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse1" aria-expanded="false" aria-controls="collapse1">
                                                    1 задание
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse1" class="collapse" aria-labelledby="heading1" data-parent="#accordion">
                                            <div class="card-body">
                                                <p class="done">Взять за основу пример `MVС`.<br>
                                                    Добавить вкладку `Группы`, при переходе на вкладку, должен отображаться список групп (лого и имена групп), в которых состоит пользователь
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="heading2">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse2" aria-expanded="false" aria-controls="collapse2">
                                                    2 задание
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse2" class="collapse" aria-labelledby="heading2" data-parent="#accordion">
                                            <div class="card-body">
                                                <p class="done">Взять за основу пример `MVС`.<br>
                                                    Добавить вкладку `Фото`, при переходе на вкладку, должны отображаться все фото пользователя с количеством лайков, репостов и комментариев каждого фото.
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="heading3">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse3" aria-expanded="false" aria-controls="collapse3">
                                                    3 задание (со звездочкой)
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse3" class="collapse" aria-labelledby="heading3" data-parent="#accordion">
                                            <div class="card-body">
                                                <p class="">Взять за основу результат `ДЗ 2`.<br>
                                                    Во вкладке `Фото`, помимо количества лайков, репостов и комментариев, выводить комментарии к каждому фото. Если комментариев к какому-либо фото нет, то, рядом с соответствующим фото, выводить надпись: `К этому фото нет комментариев.`<br>
                                                    Каждый комментарий - это фото автора, фио автора, дата комментария, текст комментария
                                                </p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="heading4">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse4" aria-expanded="false" aria-controls="collapse4">
                                                    4 задание (со большой звездочкой)
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse4" class="collapse" aria-labelledby="heading4" data-parent="#accordion">
                                            <div class="card-body">
                                                <p class="">Взять за основу результат `ДЗ 3`.<br>
                                                    Вместо обычного списка всех фото, выводить фото, сгруппированные по альбомам, в которых они состоят.<br>
                                                    Например:<br>
                                                    Альбом1<br>
                                                    фото1<br>
                                                    фото2<br>
                                                    фото3<br>
                                                    <br>
                                                    Альбом2<br>
                                                    фото1<br>
                                                    фото2<br>
                                                    <br>
                                                    И так далее…</p>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card">
                                        <div class="card-header" id="heading5">
                                            <h5 class="mb-0">
                                                <button class="btn btn-link" data-toggle="collapse" data-target="#collapse5" aria-expanded="false" aria-controls="collapse5">
                                                    5 задание (со очень большой звездочкой)
                                                </button>
                                            </h5>
                                        </div>
                                        <div id="collapse5" class="collapse" aria-labelledby="heading5" data-parent="#accordion">
                                            <div class="card-body">
                                                <p class="">.Взять за основу результат `ДЗ 4`.<br>
                                                    Добавить возможность выбирать сортировку фото в альбомах:<br>
                                                    - по количеству комментариев<br>
                                                    - по количеству репостов<br>
                                                    - по количеству лайков<br>
                                                    - по дате добавления</p>
                                                <p class="">Сортировка должно происходить на стороне вашего приложения, а не при помощи ВКонтакте.</p>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                                <!-- End inner accordion -->


                                <p class="">Верстка остается на ваше усмотрение.</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

            <div class="col-12">
                <h2 id="currentUser"></h2>
                <div class="btn-group btn-group-lg mainControl">
                    <button type="button" class="btn btn-secondary" data-action="friends">Друзья</button>
                    <button type="button" class="btn btn-secondary" data-action="news">Лента ваших новостей</button>
                    <button type="button" class="btn btn-secondary" data-action="groups">Группы</button>
                    <button type="button" class="btn btn-secondary" data-action="photos">Фото (аватарки)</button>
                    <button type="button" class="btn btn-secondary" data-action="albums">Альбомы (все фото из альбомов)</button>
                </div>
                <hr>
                <div id="results" class="results"></div>
            </div>
        </div>
    </div>
</section>


<footer>
    <script src="https://code.jquery.com/jquery-3.1.1.slim.min.js" integrity="sha384-A7FZj7v+d/sdmMqp/nOQwliLvUsJfDHW+k9Omg/a/EheAdgtzNs3hpfag6Ed950n" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/tether/1.4.0/js/tether.min.js" integrity="sha384-DztdAPBWPRXSA/3eYEEUWrWCy7G5KFbe8fFjk5JAIxUYHKkDx6Qin1DkWx51bBrb" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-alpha.6/js/bootstrap.min.js" integrity="sha384-vBWWzlZJ8ea9aCX4pEW3rVHjgjt7zpkNpZk+02D9phzyeVkE+jo0ieGizqPLForn" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/4.0.11/handlebars.js"></script>
    <script src="http://vk.com/js/api/openapi.js" type="text/javascript"></script>


    <script src="http://pro.qoobeo.ru/qsvgl/js/qoobloader.js"></script>


    <script src="js/myModel.js"></script>
    <script src="js/myView.js"></script>
    <script src="js/myController.js"></script>
    <script src="js/myRouter.js"></script>
    <script src="js/myEntry.js"></script>
    <script src="js/my.js"></script>
</footer>

<!-- Handlebars TPL -->
    <script type="text/x-handlebars-template" id="headerTemplate">Данные из VK-аккаунта: {{first_name}} {{last_name}}</script>

    <script type="text/x-handlebars-template" id="friendsTemplate">
            <div class="friendsList grid">
                {{#each list}}
                <div class="friend item">
                    <img src="{{photo_100}}" class="rounded-circle photo100">
                    <p>{{first_name}}<br>{{last_name}}</p>
                </div>
                {{/each}}
            </div>
    </script>

    <script type="text/x-handlebars-template" id="newsTemplate">
        <div class="news">
            {{#each list}}
            {{#if text}}
            <div class="post">
                <b>{{formatDate date}}</b>
                <div class="post-text">{{{text}}}</div>
            </div>
            <hr>
            {{/if}}
            {{/each}}
        </div>
    </script>

    <script type="text/x-handlebars-template" id="groupsTemplate">
        <div class="groups grid">
            {{#each list}}
            <div class="group item">
                <img src="{{photo_100}}" class="rounded-circle photo100">
                <p>{{name}}</p>
            </div>
            {{/each}}
        </div>
    </script>


    <!-- Фото аватарок -->
    <script type="text/x-handlebars-template" id="photosTemplate">
        <div class="photos grid">
            {{#each list}}
            <div class="photo item">
                <img src="{{photo_130}}" class="rounded-circle photo100">
                <p>ID: {{id}}</p>
            </div>
            {{/each}}
        </div>
    </script>

    <!-- Фото в куче -->
    <script type="text/x-handlebars-template" id="photoInBanchTemplate">
        {{#each list}}
        <div class="photo photoInBanch item">
            <div class="photo_desc">
                <img src="{{photo_130}}" class="rounded-circle photo100">
                <div class="photo_info">
                    <div class="like">{{likes.count}}</div>
                    <div class="repost">{{reposts.count}}</div>
                    <div class="comments">{{comments.count}}</div>
                </div>
            </div>

            <p>{{text}}</p>
        </div>
        {{/each}}
    </script>

    <!-- Альбом с областью для фото -->
    <script type="text/x-handlebars-template" id="albumsTemplate">
        <div class="albums grid">
            {{#each list}}
            <div class="album item">
                <p class="h3">{{title}} <span>{{description}} (ID: {{id}})</span></p>
                <div  class="album__photos album{{id}}">
                </div>
            </div>
            {{/each}}
        </div>
    </script>

    <!-- Фото с местом под комментарии -->
    <script type="text/x-handlebars-template" id="photosExtTemplate">
        {{#each list}}
        <div class="photo photo{{id}} item {{#iff comments.count '>' 0}}extended_photo{{/iff}}"  style="background-image: url({{photo_130}})">
            <div class="photo_desc">
                <!-- <img src="{{photo_130}}" class="NOT-rounded-circle photo100"> -->
                <div class="photo_info">
                    <div class="like">{{likes.count}}</div>
                    <div class="repost">{{reposts.count}}</div>
                    <div class="comments">{{comments.count}}</div>
                </div>
            </div>

            <p class="photo_text {{#if text}}filled{{/if}}">{{text}}</p>

            <p class="photo_comments">
                {{#iff comments.count '>' 0}}
                    Подождите, скоро комментарии загрузятся
                {{else}}
                    Комментариев нет
                {{/iff}}
            </p>
        </div>
        {{/each}}
    </script>

    <!-- Комментариями к фото -->
    <script type="text/x-handlebars-template" id="commentsToPhotosTemplate">
        {{#each list}}
        <div class="comment fromId{{from_id}}">
            <div class="fromImg"></div>
            <div class="text">
                <p><span  class="fromName"></span><span class="date">{{formatDate date}}</span></p>
                <p>{{text}}</p>
            </div>
        </div>
        {{/each}}
    </script>

    <!-- Фото авторы комментариев-->
    <script type="text/x-handlebars-template" id="imgAuthorsOfCommentsTemplate">
        <img src="{{photo_50}}" class="img-fluid">
    </script>

    <!-- Имя авторы комментариев-->
    <script type="text/x-handlebars-template" id="nameAuthorsOfCommentsTemplate">{{first_name}} {{last_name}}</script>
<!-- END Handlebars TPL -->

</body>
</html>